var d=(a,o,n)=>new Promise((u,s)=>{var c=e=>{try{i(n.next(e))}catch(t){s(t)}},r=e=>{try{i(n.throw(e))}catch(t){s(t)}},i=e=>e.done?u(e.value):Promise.resolve(e.value).then(c,r);i((n=n.apply(a,o)).next())});import{B as f,u as b}from"./useTable.ceee4688.js";import{T as w}from"./useForm.ede354a2.js";import{a as E}from"./index.088c10bd.js";import{cj as g,bW as T,a_ as B,b as C,a$ as l,o as D,b0 as F,l as p,aE as S,ch as P,k as m,aG as R,p as _}from"./index.f5037e0e.js";import{T as I}from"./index.a3b14931.js";import{c as x,d as A}from"./productApi.1f1fcae7.js";import"./index.7bad8a45.js";import"./useContentViewHeight.bf04c9e4.js";import"./_baseIteratee.95b83d5c.js";import"./index.f2477e00.js";import"./isEqual.6f9a623a.js";import"./index.20502e53.js";import"./index.75b6fcd6.js";import"./useSortable.bb4baa66.js";import"./RedoOutlined.16dcdfe4.js";import"./index.6e45ebf0.js";import"./index.be215484.js";import"./index.8089f2c1.js";import"./scrollTo.779d4262.js";import"./index.dcc1b961.js";import"./index.bb86497d.js";import"./ArrowLeftOutlined.c09ac8d8.js";const k=[{title:"\u63CF\u8FF0",dataIndex:"description",width:100},{title:"\u5730\u5740",dataIndex:"addressDetail",width:120},{title:"\u5DE5\u65F6",dataIndex:"totalManHour",width:120},{title:"\u5B8C\u6210\u7387",dataIndex:"completionRate",width:120,customRender:({text:a})=>`${a} %`},{title:"\u72B6\u6001",dataIndex:"productStatusId",width:100,customRender:({text:a})=>{var n;const o=g.from(a);return T(I,{color:(n=o==null?void 0:o.color)!=null?n:"black"},()=>o==null?void 0:o.name)}}],$=C({name:"ProductPage",components:{BasicTable:f,PageWrapper:E,TableAction:w},setup(){const a=S(),{createMessage:o}=_(),[n,{setPagination:u,reload:s}]=b({api:e=>d(this,null,function*(){const t=yield x({page:e.page,pageSize:e.pageSize});return u({pageSize:t.data.page.pageSize,current:t.data.page.pageIndex,total:t.data.page.total}),new Promise(h=>{h([...t.data.productListDtos])})}),columns:k,useSearchForm:!1,showTableSetting:!0,bordered:!0,showIndexColumn:!1,pagination:{pageSize:10,showQuickJumper:!1,showSizeChanger:!1},actionColumn:{width:100,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"}}});function c(e){console.log("\u70B9\u51FB\u4E86\u5220\u9664",e)}function r(e){const{id:t}=e;return a(`${R.PRODUCT_DETAIL}/${t}`),{}}function i(e){const{id:t}=e;A(t).then(()=>{o.success("\u4E0B\u53D1\u6210\u529F"),s()})}return{registerTable:n,handleAssignTask:c,handleDetail:r,handleDown:i,ProductStatusEnum:g,RoleEnum:P}}});function z(a,o,n,u,s,c){const r=l("TableAction"),i=l("BasicTable"),e=l("PageWrapper");return D(),F(e,{contentBackground:"",contentClass:"flex",dense:"",contentFullHeight:"",fixedHeight:""},{default:p(()=>[m(i,{onRegister:a.registerTable},{action:p(({record:t})=>[m(r,{actions:[{label:"\u8BE6\u60C5",onClick:a.handleDetail.bind(null,t),auth:[a.RoleEnum.MANAGER]},{label:"\u4E0B\u53D1",ifShow:t.productStatusId==a.ProductStatusEnum.UnProduct.id,color:"success",popConfirm:{title:"\u662F\u5426\u4E0B\u53D1\uFF1F",confirm:a.handleDown.bind(null,t)},auth:[a.RoleEnum.MANAGER]}]},null,8,["actions"])]),_:1},8,["onRegister"])]),_:1})}var ne=B($,[["render",z]]);export{ne as default};
